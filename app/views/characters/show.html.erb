<%= render partial: "display", locals: { character: @character } %>

<script>
	class Character {
			setup() {
				let value = character_statistic.value;
				this.json = JSON.parse(value);
				this.hit_point_inputs = hit_point_inputs
				this.details_inputs = details_inputs
				this.ability_scores_inputs = ability_scores_inputs
				// Exist more inputs
			}

			insert_json(json, name){
				this.json[name] = json;
			}

			get_json_stringify() {
				let json_stringify = JSON.stringify(this.json)
				return json_stringify;
			}

			insert_inputs_to_json() {
				this.insert_element(this.hit_point_inputs, "hit_point");
				this.insert_element(this.details_inputs, "details");
				this.insert_element(this.ability_scores_inputs, "ability_scores");
				// Exist more inputs
			}

			insert_element(array_input, name) {
				let json_tmp = {};
				for (var i = 0; i < array_input.length; i++) {

					json_tmp[array_input[i].id] = array_input[i].value;

					if (i == (array_input.length - 1)){ // If is final insert json tmp in main json
						character.insert_json(json_tmp, name)
					}
				}
			}
		};
		
		const character = new Character();

		let value = <%= raw @character.statistic %>;
		function set_input(array, name) {
			for (var i = 0; i < array.length; i++) {
				let element = array[i].id;
				array[i].value = value[name][element];
			}
		}
</script>